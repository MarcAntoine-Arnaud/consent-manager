<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:17,&quot;tests&quot;:43,&quot;passes&quot;:43,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-06-27T16:51:19.407Z&quot;,&quot;end&quot;:&quot;2024-06-27T16:51:24.452Z&quot;,&quot;duration&quot;:5045,&quot;testsRegistered&quot;:43,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;4517352a-ee26-4e9f-b05e-979f8b9b1209&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1029,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(process.env.MONGO_URI_TEST);\nawait mongoose_1.default.connect(process.env.MONGO_URI_TEST);\nawait mongoose_1.default.connection.db.dropDatabase();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0a40d41-6707-4cb5-a8e0-3c030f9d9b13&quot;,&quot;parentUUID&quot;:&quot;4517352a-ee26-4e9f-b05e-979f8b9b1209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;serverInstance = (0, server_1.startServer)(9091);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c850a341-ec96-4093-b130-e38900a16779&quot;,&quot;parentUUID&quot;:&quot;4517352a-ee26-4e9f-b05e-979f8b9b1209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:572,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;serverInstance = (0, server_1.startServer)(9092);\n//create new participant\nconst participantData = testAccount_1.testParticipant3;\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants`)\n    .send(participantData);\n//login the participant\nconst authResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/login`)\n    .send({\n    clientID: testAccount_1.testParticipant3.clientID,\n    clientSecret: testAccount_1.testParticipant3.clientSecret,\n});\nparticipantJWT = `Bearer ${authResponse.body.jwt}`;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3df73936-834c-4c04-aac1-91210362111b&quot;,&quot;parentUUID&quot;:&quot;4517352a-ee26-4e9f-b05e-979f8b9b1209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(process.env.MONGO_URI_TEST);\nawait mongoose_1.default.connection.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3636e6c-51b1-4200-bdd9-196133530d22&quot;,&quot;parentUUID&quot;:&quot;4517352a-ee26-4e9f-b05e-979f8b9b1209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;serverInstance.server.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ad18bbd-6f71-469e-8f76-6de2653a764a&quot;,&quot;parentUUID&quot;:&quot;4517352a-ee26-4e9f-b05e-979f8b9b1209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;serverInstance.server.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a237ecc-9f74-4a16-bf41-edd3995f8549&quot;,&quot;parentUUID&quot;:&quot;4517352a-ee26-4e9f-b05e-979f8b9b1209&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;title&quot;:&quot;Consent Routes Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\consents.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\consents.spec.ts&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Consent Routes Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests \&quot;before all\&quot; hook in \&quot;Consent Routes Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:900,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;nock_1.default.cleanAll();\nserverInstance = (0, server_1.startServer)(9090);\n// Create Provider\nconst providerData = testAccount_1.testProvider1;\nconst providerResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/`)\n    .send(providerData);\nproviderId = providerResponse.body._id;\nselfDesc_providerId = providerData.selfDescriptionURL;\n// Login provider\nconst providerAuthResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/login`)\n    .send({\n    clientID: testAccount_1.testProvider1.clientID,\n    clientSecret: testAccount_1.testProvider1.clientSecret,\n});\nproviderJWT = `Bearer ${providerAuthResponse.body.jwt}`;\nproviderBase64 = Buffer.from(providerData.selfDescriptionURL).toString(\&quot;base64\&quot;);\n// Create Consumer\nconst consumerData = testAccount_1.testConsumer1;\nconst consumerResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/`)\n    .send(consumerData);\nconsumerId = consumerResponse.body._id;\nselfDesc_consumerId = consumerData.selfDescriptionURL;\n// Login consumer\nconst consumerAuthResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/login`)\n    .send({\n    clientID: testAccount_1.testConsumer1.clientID,\n    clientSecret: testAccount_1.testConsumer1.clientSecret,\n});\nconsumerJWT = `Bearer ${consumerAuthResponse.body.jwt}`;\nconsumerBase64 = Buffer.from(consumerData.selfDescriptionURL).toString(\&quot;base64\&quot;);\n// Create User\nconst userData = testAccount_1.testUser1;\nconst userResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/signup`)\n    .send(userData);\nuserId = userResponse.body.user._id;\n// Login user\nconst userAuthresponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/login`)\n    .send({\n    email: testAccount_1.testUser1.email,\n    password: testAccount_1.testUser1.password,\n});\nuserJwt = `Bearer ${userAuthresponse.body.accessToken}`;\n// Create UserIdentifier Provider\nconst providerUserIdentifierResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/register`)\n    .set(\&quot;Authorization\&quot;, providerJWT)\n    .send({\n    email: testAccount_1.testUser1.email,\n    identifier: \&quot;providerUserIdentifier1\&quot;,\n});\nproviderUserIdentifier = providerUserIdentifierResponse.body._id;\n// Create UserIdentifier Consumer\nconst consumerUserIdentifierResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/register`)\n    .set(\&quot;Authorization\&quot;, consumerJWT)\n    .send({\n    email: testAccount_1.testUser1.email,\n    identifier: \&quot;consumerUserIdentifier1\&quot;,\n});\nconsumerUserIdentifier = consumerUserIdentifierResponse.body._id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34b5c132-c20a-42b5-93ef-ef43a6ce220e&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Consent Routes Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests \&quot;after all\&quot; hook in \&quot;Consent Routes Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;serverInstance.server.close();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06d651ec-e1c9-4b29-9a43-f1296a189985&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get available exchanges&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should get available exchanges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/exchanges/as?as=provider`)\n    .set(\&quot;Authorization\&quot;, providerJWT);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;participant\&quot;);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;exchanges\&quot;);\n(0, chai_1.expect)(response.body.participant).to.have.property(\&quot;selfDescription\&quot;);\n(0, chai_1.expect)(response.body.participant).to.have.property(\&quot;base64SelfDescription\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5afd746-d0ea-470d-aff1-9269686917aa&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get the privacy notices&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should get the privacy notices&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:233,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/${userId}/${providerBase64}/${consumerBase64}`)\n    .set(\&quot;x-user-key\&quot;, providerUserIdentifier);\nprivacyNoticeId = response.body[0]?._id;\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n(0, chai_1.expect)(response.body[0]).to.have.property(\&quot;_id\&quot;);\n(0, chai_1.expect)(response.body[0]).to.have.property(\&quot;dataProvider\&quot;, \&quot;https://api.test.com/v1/catalog/participants/656dfb3e282d47cfa6b66b2b\&quot;);\n(0, chai_1.expect)(response.body[0]).to.have.property(\&quot;contract\&quot;, \&quot;http://localhost:8888/contracts/65e5d715c99e484e4685a964\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a8c76ce-311c-410d-8f0c-2e913b11962d&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a privacy notice by id&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should get a privacy notice by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:149,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/privacy-notices/${privacyNoticeId}`)\n    .set(\&quot;x-user-key\&quot;, providerUserIdentifier);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n(0, chai_1.expect)(response.body).to.have.property(\&quot;_id\&quot;).and.to.equal(privacyNoticeId);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;contract\&quot;);\n(0, chai_1.expect)(response.body.dataProvider._id).to.equal(testAccount_1.testProvider1.identifier);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;355479d0-fa86-4b03-a9e6-c923b6589b30&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should give consent&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should give consent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/consents`)\n    .set(\&quot;x-user-key\&quot;, providerUserIdentifier)\n    .send({\n    privacyNoticeId: privacyNoticeId,\n});\nconsentId = response.body._id;\n(0, chai_1.expect)(response.status).to.be.equal(201);\n// expect(response.body.user).to.equal(userId);\n(0, chai_1.expect)(response.body.providerUserIdentifier).to.equal(providerUserIdentifier);\n(0, chai_1.expect)(response.body.consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0, chai_1.expect)(response.body.consented).to.equal(true);\n(0, chai_1.expect)(response.body.dataProvider).to.equal(providerId);\n(0, chai_1.expect)(response.body.dataConsumer).to.equal(consumerId);\n(0, chai_1.expect)(response.body.privacyNotice).to.equal(privacyNoticeId);\n(0, chai_1.expect)(response.body.status).to.equal(\&quot;granted\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fea64e87-77fa-4a3c-94f1-a82258aa0f6c&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should triggerDataExchange&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should triggerDataExchange&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// mocking export consent\n(0, nock_1.default)(\&quot;https://test.consent\&quot;).post(\&quot;/consent/export\&quot;).reply(200, {\n    message: \&quot;ok\&quot;,\n    token,\n    dataExchangeId: \&quot;5f6dd4e3495aebd3aca59529\&quot;,\n});\n(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/consents/${consentId}/data-exchange`)\n    .set(\&quot;x-user-key\&quot;, providerUserIdentifier);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;successfully sent consent to the provider&#x27;s consent export endpoint to trigger the data exchange\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b498542-c518-41c0-b1fe-09eb1525e58a&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;getUserAvailableExchanges&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests getUserAvailableExchanges&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/exchanges/user`)\n    .set(\&quot;Authorization\&quot;, userJwt)\n    .query({ participantId: providerId })\n    .expect(200);\ncontractbase64 = response.body.exchanges[0].base64Contract;\n(0, chai_1.expect)(response.body.participant.selfDescription).to.equal(selfDesc_providerId);\n(0, chai_1.expect)(response.body.exchanges).to.not.be.empty;\n(0, chai_1.expect)(response.body.exchanges[0].participantSelfDescription).to.equal(selfDesc_consumerId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc631a6a-3d07-450c-aff4-130822d959a3&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;getUserPrivacyNoticesByContract&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests getUserPrivacyNoticesByContract&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/${providerUserIdentifier}/${providerBase64}/${consumerBase64}/${contractbase64}`)\n    .set(\&quot;Authorization\&quot;, userJwt)\n    .expect(200);\nconsole.log(\&quot;contractrbase64:\&quot;, contractbase64);\n(0, chai_1.expect)(response.body[0].dataProvider).to.equal(selfDesc_providerId);\n(0, chai_1.expect)(response.body[0].recipients).to.deep.include(selfDesc_consumerId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92508627-2b1e-4ffe-bde0-bf18f388282c&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;getUserPrivacyNoticeById&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests getUserPrivacyNoticeById&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/privacy-notices/${privacyNoticeId}/user`)\n    .set(\&quot;Authorization\&quot;, userJwt)\n    .expect(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;_id\&quot;);\n(0, chai_1.expect)(response.body.contract.orchestrator).to.equal(testAccount_1.testProvider1.did);\n(0, chai_1.expect)(response.body.contract.status).to.equal(\&quot;pending\&quot;);\n(0, chai_1.expect)(response.body.dataProvider._id).to.equal(testAccount_1.testProvider1.identifier);\n(0, chai_1.expect)(response.body.purposes[0].providedBy).to.equal(testAccount_1.testConsumer1.identifier);\n(0, chai_1.expect)(response.body.data[0].providedBy).to.equal(testAccount_1.testProvider1.identifier);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c727327a-72cc-4bcc-8bed-6b8d9bc00873&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUserConsents - by user&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should getUserConsents - by user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/me`)\n    .set(\&quot;x-user-key\&quot;, providerUserIdentifier);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;consents\&quot;);\n(0, chai_1.expect)(response.body.consents[0]._id).to.equal(consentId);\n(0, chai_1.expect)(response.body.consents[0].providerUserIdentifier).to.equal(providerUserIdentifier);\n(0, chai_1.expect)(response.body.consents[0].consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0, chai_1.expect)(response.body.consents[0].consented).to.equal(true);\n(0, chai_1.expect)(response.body.consents[0].dataProvider).to.equal(providerId);\n(0, chai_1.expect)(response.body.consents[0].dataConsumer).to.equal(consumerId);\n(0, chai_1.expect)(response.body.consents[0].status).to.equal(\&quot;granted\&quot;);\n(0, chai_1.expect)(response.body.consents[0].privacyNotice).to.equal(privacyNoticeId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae5659c7-d824-4653-ae3b-06bced1135e4&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUserConsents - by participant&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should getUserConsents - by participant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/participants/${providerUserIdentifier}/`)\n    .set(\&quot;Authorization\&quot;, providerJWT);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;consents\&quot;);\n(0, chai_1.expect)(response.body.consents[0]._id).to.equal(consentId);\n(0, chai_1.expect)(response.body.consents[0].providerUserIdentifier).to.equal(providerUserIdentifier);\n(0, chai_1.expect)(response.body.consents[0].consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0, chai_1.expect)(response.body.consents[0].consented).to.equal(true);\n(0, chai_1.expect)(response.body.consents[0].dataProvider).to.equal(providerId);\n(0, chai_1.expect)(response.body.consents[0].dataConsumer).to.equal(consumerId);\n(0, chai_1.expect)(response.body.consents[0].status).to.equal(\&quot;granted\&quot;);\n(0, chai_1.expect)(response.body.consents[0].privacyNotice).to.equal(privacyNoticeId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88c782fa-2fe5-473c-a05a-bbe297209595&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUserConsentById - by user&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should getUserConsentById - by user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/me/${consentId}`)\n    .set(\&quot;x-user-key\&quot;, providerUserIdentifier);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body._id).to.equal(consentId);\n(0, chai_1.expect)(response.body.providerUserIdentifier).to.equal(providerUserIdentifier);\n(0, chai_1.expect)(response.body.consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0, chai_1.expect)(response.body.consented).to.equal(true);\n(0, chai_1.expect)(response.body.dataProvider).to.equal(providerId);\n(0, chai_1.expect)(response.body.dataConsumer).to.equal(consumerId);\n(0, chai_1.expect)(response.body.status).to.equal(\&quot;granted\&quot;);\n(0, chai_1.expect)(response.body.privacyNotice).to.equal(privacyNoticeId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1c795c4-5754-45af-a419-79f75570f366&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUserConsentById - by participant&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should getUserConsentById - by participant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/participants/${providerUserIdentifier}/${consentId}`)\n    .set(\&quot;Authorization\&quot;, providerJWT);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body._id).to.equal(consentId);\n(0, chai_1.expect)(response.body.providerUserIdentifier).to.equal(providerUserIdentifier);\n(0, chai_1.expect)(response.body.consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0, chai_1.expect)(response.body.consented).to.equal(true);\n(0, chai_1.expect)(response.body.dataProvider).to.equal(providerId);\n(0, chai_1.expect)(response.body.dataConsumer).to.equal(consumerId);\n(0, chai_1.expect)(response.body.status).to.equal(\&quot;granted\&quot;);\n(0, chai_1.expect)(response.body.privacyNotice).to.equal(privacyNoticeId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27c0e0e1-aba3-4066-b54a-ca69a8d6b41e&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should attach token to consent&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should attach token to consent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:119,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//Mocking import consent\n(0, nock_1.default)(\&quot;https://test.consent\&quot;).post(\&quot;/consent/import\&quot;).reply(200, {\n    message: \&quot;ok\&quot;,\n    token,\n    dataExchangeId: \&quot;5f6dd4e3495aebd3aca59529\&quot;,\n});\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/consents/${consentId}/token`)\n    .set(\&quot;Authorization\&quot;, providerJWT)\n    .send({\n    token,\n    providerDataExchangeId: \&quot;5f6dd4e3495aebd3aca59529\&quot;,\n});\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;successfully forwarded consent to the data consumer\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87fc27dd-eefd-46ca-ac60-b552e3bc0aae&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should validate the consent&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests should validate the consent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;//mocking export consent\n(0, nock_1.default)(\&quot;https://test.consent\&quot;).post(\&quot;/consent/export\&quot;).reply(200, {\n    message: \&quot;ok\&quot;,\n    token,\n    dataExchangeId: \&quot;5f6dd4e3495aebd3aca59529\&quot;,\n});\n(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/consents/${consentId}/validate`)\n    .set(\&quot;Authorization\&quot;, providerJWT)\n    .send({\n    token,\n});\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;token matches consent token\&quot;);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;verified\&quot;, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6105047-91ca-47d5-8707-21f74d166433&quot;,&quot;parentUUID&quot;:&quot;729bfc0b-19e4-4cc7-af15-07a4ee01c549&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a9d99731-d9b4-46d6-ae2f-42cda8bf9544&quot;,&quot;title&quot;:&quot;Test error&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\consents.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\consents.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not getUserConsents with no authorization&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests Test error should not getUserConsents with no authorization&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/consents/me`)\n    .expect(401);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;Authorization header missing or invalid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de3191db-c1e9-4641-8639-e080fb940f6b&quot;,&quot;parentUUID&quot;:&quot;a9d99731-d9b4-46d6-ae2f-42cda8bf9544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not trigger data exchange for a non-existent consent&quot;,&quot;fullTitle&quot;:&quot;Consent Routes Tests Test error should not trigger data exchange for a non-existent consent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;(0, nock_1.default)(\&quot;https://test.consent\&quot;).post(\&quot;/consent/export\&quot;).reply(200, {\n    message: \&quot;ok\&quot;,\n    token,\n    dataExchangeId: \&quot;5f6dd4e3495aebd3aca59529\&quot;,\n});\n(0, mock_1.setupnockMocks)(providerBase64);\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/consents/6601a6265cbdad603e4e9a8c/data-exchange`)\n    .set(\&quot;x-user-key\&quot;, providerUserIdentifier)\n    .send({ privacyNoticeId: privacyNoticeId });\n(0, chai_1.expect)(response.status).to.be.equal(404);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;consent not found\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9752f23-a1f2-4a73-9624-dc39f0751eaa&quot;,&quot;parentUUID&quot;:&quot;a9d99731-d9b4-46d6-ae2f-42cda8bf9544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de3191db-c1e9-4641-8639-e080fb940f6b&quot;,&quot;e9752f23-a1f2-4a73-9624-dc39f0751eaa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000}],&quot;passes&quot;:[&quot;c5afd746-d0ea-470d-aff1-9269686917aa&quot;,&quot;9a8c76ce-311c-410d-8f0c-2e913b11962d&quot;,&quot;355479d0-fa86-4b03-a9e6-c923b6589b30&quot;,&quot;fea64e87-77fa-4a3c-94f1-a82258aa0f6c&quot;,&quot;1b498542-c518-41c0-b1fe-09eb1525e58a&quot;,&quot;cc631a6a-3d07-450c-aff4-130822d959a3&quot;,&quot;92508627-2b1e-4ffe-bde0-bf18f388282c&quot;,&quot;c727327a-72cc-4bcc-8bed-6b8d9bc00873&quot;,&quot;ae5659c7-d824-4653-ae3b-06bced1135e4&quot;,&quot;88c782fa-2fe5-473c-a05a-bbe297209595&quot;,&quot;a1c795c4-5754-45af-a419-79f75570f366&quot;,&quot;27c0e0e1-aba3-4066-b54a-ca69a8d6b41e&quot;,&quot;87fc27dd-eefd-46ca-ac60-b552e3bc0aae&quot;,&quot;d6105047-91ca-47d5-8707-21f74d166433&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1265,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;b044ec11-fd9d-49a5-875f-89c6972b8fce&quot;,&quot;title&quot;:&quot;Participant Routes Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3d53718d-b8cf-4843-9888-86073328d57a&quot;,&quot;title&quot;:&quot;registerParticipant&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register a new participant&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests registerParticipant should register a new participant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const participantData = testAccount_1.testParticipant2;\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/`)\n    .send(participantData);\nparticipantId = response.body._id;\n(0, chai_1.expect)(response.status).to.be.equal(201);\n(0, chai_1.expect)(response.body).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43d8c003-9b6f-4232-9dd8-2fcce2412dcd&quot;,&quot;parentUUID&quot;:&quot;3d53718d-b8cf-4843-9888-86073328d57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to register existing participant&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests registerParticipant should fail to register existing participant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Assuming the participant with client ID &#x27;existingClient&#x27; already exists in the database\nconst existingParticipantData = testAccount_1.testExistingPrticipant;\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants`)\n    .send(existingParticipantData)\n    .expect(409);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;Participant already exists\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68e84c87-8cb3-464b-b557-19c627c9fffb&quot;,&quot;parentUUID&quot;:&quot;3d53718d-b8cf-4843-9888-86073328d57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43d8c003-9b6f-4232-9dd8-2fcce2412dcd&quot;,&quot;68e84c87-8cb3-464b-b557-19c627c9fffb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:53,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;7c811642-a967-4ffd-9c20-aa926f2e13c2&quot;,&quot;title&quot;:&quot;getParticipantById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get participant by ID&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests getParticipantById should get participant by ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app).get(`/v1/participants/${participantId}`);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties if needed&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d98d05dc-2aaf-4543-bd94-a443d3acef8a&quot;,&quot;parentUUID&quot;:&quot;7c811642-a967-4ffd-9c20-aa926f2e13c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to get non-existing participant&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests getParticipantById should fail to get non-existing participant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app).get(`/v1/participants/65eed1cd59f9242b784f2494`);\n(0, chai_1.expect)(response.status).to.be.equal(404);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;participant not found\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3978b160-c893-4f96-a05b-96faeb86271c&quot;,&quot;parentUUID&quot;:&quot;7c811642-a967-4ffd-9c20-aa926f2e13c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d98d05dc-2aaf-4543-bd94-a443d3acef8a&quot;,&quot;3978b160-c893-4f96-a05b-96faeb86271c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;fdf42884-2b75-4986-9d85-a2988f3cf0fb&quot;,&quot;title&quot;:&quot;getParticipantByClientId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get participant by client ID&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests getParticipantByClientId should get participant by client ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Assuming there&#x27;s a participant with client ID &#x27;client123&#x27; in the database\nconst response = await (0, supertest_1.default)(serverInstance.app).get(`/v1/participants/clientId/bI8fbrUoT4th4zMXRqCV6YVxpPknLDHttLVLG6Pgtm4JQlMInSJscxZnEDZxQBQBv2BP2M6QFYbDAQrD3ibnsWpYySIFr4w27DKQ`);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties if needed&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beb1426d-73c2-4c82-8550-14b38b87e9d7&quot;,&quot;parentUUID&quot;:&quot;fdf42884-2b75-4986-9d85-a2988f3cf0fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to get participant with non-existing client ID&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests getParticipantByClientId should fail to get participant with non-existing client ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app).get(`/v1/participants/clientId/nonExistingClientId`);\n(0, chai_1.expect)(response.status).to.be.equal(404);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;participant not found\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;319e284d-632f-41c4-a2bc-c7c522174be2&quot;,&quot;parentUUID&quot;:&quot;fdf42884-2b75-4986-9d85-a2988f3cf0fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;beb1426d-73c2-4c82-8550-14b38b87e9d7&quot;,&quot;319e284d-632f-41c4-a2bc-c7c522174be2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;c2082e52-8f9c-4dc3-8441-e88990560c44&quot;,&quot;title&quot;:&quot;loginParticipant&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login participant with valid credentials&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests loginParticipant should login participant with valid credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const providerAuthResponse = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/login`)\n    .send({\n    clientID: testAccount_1.testParticipant2.clientID,\n    clientSecret: testAccount_1.testParticipant2.clientSecret,\n});\n(0, chai_1.expect)(providerAuthResponse.status).to.be.equal(200);\nparticipantJwt = `Bearer ${providerAuthResponse.body.jwt}`;\n(0, chai_1.expect)(providerAuthResponse.body).to.have.property(\&quot;success\&quot;, true);\n(0, chai_1.expect)(providerAuthResponse.body).to.have.property(\&quot;jwt\&quot;);\n(0, chai_1.expect)(providerAuthResponse.body).to.have.property(\&quot;message\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2874c51a-b5be-4b52-9bdc-7536e5664f5c&quot;,&quot;parentUUID&quot;:&quot;c2082e52-8f9c-4dc3-8441-e88990560c44&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to login participant with invalid credentials&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests loginParticipant should fail to login participant with invalid credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/participants/login`)\n    .send({\n    clientID: \&quot;nonExistingClient\&quot;,\n    clientSecret: \&quot;invalidSecret\&quot;,\n})\n    .expect(404);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;participant not found\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cd1499a-b37d-479f-aa33-b736e267b92d&quot;,&quot;parentUUID&quot;:&quot;c2082e52-8f9c-4dc3-8441-e88990560c44&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2874c51a-b5be-4b52-9bdc-7536e5664f5c&quot;,&quot;4cd1499a-b37d-479f-aa33-b736e267b92d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;b670e32d-6180-4a87-bc43-e3b17223710b&quot;,&quot;title&quot;:&quot;updateParticipantByClientId&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update participant by client ID&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests updateParticipantByClientId should update participant by client ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedParticipantData = testAccount_1.testupdatedPrticipant;\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .put(`/v1/participants/clientId/bI8fbrUoT4th4zMXRqCV6YVxpPknLDHttLVLG6Pgtm4JQlMInSJscxZnEDZxQBQBv2BP2M6QFYbDAQrD3ibnsWpYySIFr4w27DKQ`)\n    .send(updatedParticipantData)\n    .set(\&quot;Authorization\&quot;, participantJwt)\n    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties if needed&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b02114e-1652-4868-82fc-7afe78f82a44&quot;,&quot;parentUUID&quot;:&quot;b670e32d-6180-4a87-bc43-e3b17223710b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to update participant with non-existing client ID&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests updateParticipantByClientId should fail to update participant with non-existing client ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app).get(`/v1/participants/clientId/nonExistingClientId`);\n(0, chai_1.expect)(response.status).to.be.equal(404);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;participant not found\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12e20912-ab99-447e-bef3-2dbc6fb13ca2&quot;,&quot;parentUUID&quot;:&quot;b670e32d-6180-4a87-bc43-e3b17223710b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b02114e-1652-4868-82fc-7afe78f82a44&quot;,&quot;12e20912-ab99-447e-bef3-2dbc6fb13ca2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:46,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;5d661f1c-87e4-47ab-8d2d-ce852a1a9615&quot;,&quot;title&quot;:&quot;getAllParticipants&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all participants&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests getAllParticipants should get all participants&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app).get(`/v1/participants/`);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties if needed&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff4e567e-e8dd-4644-8fcb-86dd4e3afa92&quot;,&quot;parentUUID&quot;:&quot;5d661f1c-87e4-47ab-8d2d-ce852a1a9615&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff4e567e-e8dd-4644-8fcb-86dd4e3afa92&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;05293c8d-2424-470b-84cf-3f2135820745&quot;,&quot;title&quot;:&quot;getMyParticipant&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getMyParticipant&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests getMyParticipant should getMyParticipant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/participants/me`)\n    .set(\&quot;Authorization\&quot;, participantJwt)\n    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties if needed&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;750cecd7-8a88-487d-99b4-34f9ea243c7a&quot;,&quot;parentUUID&quot;:&quot;05293c8d-2424-470b-84cf-3f2135820745&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;750cecd7-8a88-487d-99b4-34f9ea243c7a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;50550199-664e-484f-9dec-cdaf61d66383&quot;,&quot;title&quot;:&quot;deleteParticipant&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\participants.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete participant&quot;,&quot;fullTitle&quot;:&quot;Participant Routes Tests deleteParticipant should delete participant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .delete(`/v1/participants/me`)\n    .set(\&quot;Authorization\&quot;, participantJwt)\n    .expect(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;Participant deleted successfully\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4336195-d045-47ec-b421-09085dce7f0f&quot;,&quot;parentUUID&quot;:&quot;50550199-664e-484f-9dec-cdaf61d66383&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4336195-d045-47ec-b421-09085dce7f0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:43,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;056672ed-f1e2-48e6-b056-66c10b00aa9e&quot;,&quot;title&quot;:&quot;Users Routes Tests&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\users.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;913eb0b9-57b1-455c-9519-7f25251d70e4&quot;,&quot;title&quot;:&quot;signup&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\users.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new user&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests signup should create a new user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:134,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userData = testAccount_1.testUser2;\nconst response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/signup`)\n    .send(userData);\nuserId = response.body.user._id;\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;user\&quot;);\n(0, chai_1.expect)(response.body.user).to.have.property(\&quot;firstName\&quot;, \&quot;John\&quot;);\n(0, chai_1.expect)(response.body.user).to.have.property(\&quot;lastName\&quot;, \&quot;Doe\&quot;);\n(0, chai_1.expect)(response.body.user).to.have.property(\&quot;email\&quot;, \&quot;john@example.com\&quot;);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;accessToken\&quot;);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;refreshToken\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76ae8569-2d81-406e-a3b3-eef7c83bacd4&quot;,&quot;parentUUID&quot;:&quot;913eb0b9-57b1-455c-9519-7f25251d70e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76ae8569-2d81-406e-a3b3-eef7c83bacd4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:134,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;37703be7-820d-4e15-8752-16b7dfac1fb2&quot;,&quot;title&quot;:&quot;login user&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\users.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login an existing user&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests login user should login an existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:159,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/login`)\n    .send({\n    email: testAccount_1.testUser2.email,\n    password: testAccount_1.testUser2.password,\n})\n    .expect(200);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;user\&quot;);\n(0, chai_1.expect)(response.body.user).to.have.property(\&quot;firstName\&quot;, \&quot;John\&quot;);\n(0, chai_1.expect)(response.body.user).to.have.property(\&quot;lastName\&quot;, \&quot;Doe\&quot;);\n(0, chai_1.expect)(response.body.user).to.have.property(\&quot;email\&quot;, \&quot;john@example.com\&quot;);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;accessToken\&quot;);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;refreshToken\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25d2ea62-46f1-4db8-85db-3a9f0cd71cbe&quot;,&quot;parentUUID&quot;:&quot;37703be7-820d-4e15-8752-16b7dfac1fb2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to login with invalid credentials&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests login user should fail to login with invalid credentials&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/login`)\n    .send({\n    email: \&quot;john@example.com\&quot;,\n    password: \&quot;wrongpassword\&quot;,\n})\n    .expect(400);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;invalid credentials\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d25b2cb-113f-48ee-b258-6832c83ac423&quot;,&quot;parentUUID&quot;:&quot;37703be7-820d-4e15-8752-16b7dfac1fb2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to login with non-existing user&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests login user should fail to login with non-existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/login`)\n    .send({\n    email: \&quot;nonexisting@example.com\&quot;,\n    password: \&quot;password\&quot;,\n})\n    .expect(404);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;User not found\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b9f6639-f3d8-4cc3-8851-818507f8a4ca&quot;,&quot;parentUUID&quot;:&quot;37703be7-820d-4e15-8752-16b7dfac1fb2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25d2ea62-46f1-4db8-85db-3a9f0cd71cbe&quot;,&quot;3d25b2cb-113f-48ee-b258-6832c83ac423&quot;,&quot;2b9f6639-f3d8-4cc3-8851-818507f8a4ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:263,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;de5244c7-710c-4b86-be40-f46ae986cebb&quot;,&quot;title&quot;:&quot;getUserById&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\users.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get user by ID&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests getUserById should get user by ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/users/${userId}`)\n    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties if needed&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0626aad-eb87-4a01-8b4e-2c7b975117fb&quot;,&quot;parentUUID&quot;:&quot;de5244c7-710c-4b86-be40-f46ae986cebb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to get non-existing user&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests getUserById should fail to get non-existing user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .get(`/v1/users/65eed1cd59f9242b784f2494`)\n    .expect(404);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;message\&quot;, \&quot;User not found\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;962216a8-922e-4978-95bd-0f40303278e6&quot;,&quot;parentUUID&quot;:&quot;de5244c7-710c-4b86-be40-f46ae986cebb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0626aad-eb87-4a01-8b4e-2c7b975117fb&quot;,&quot;962216a8-922e-4978-95bd-0f40303278e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;230bb7bc-1db2-4d65-b68c-4e171c8bc9dd&quot;,&quot;title&quot;:&quot;registerUserIdentifier&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\users.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register a new user identifier&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifier should register a new user identifier&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/register`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({\n    email: \&quot;newuser@example.com\&quot;,\n    identifier: \&quot;newidentifier\&quot;,\n})\n    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c14ca36e-35f1-4661-9703-bbfda6da78ab&quot;,&quot;parentUUID&quot;:&quot;230bb7bc-1db2-4d65-b68c-4e171c8bc9dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to register existing user identifier&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifier should fail to register existing user identifier&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/register`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({\n    email: \&quot;newuser@example.com\&quot;,\n    identifier: \&quot;newidentifier\&quot;,\n})\n    .expect(409);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;User already exists\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42d3837b-b204-4577-8380-6efd297e90a5&quot;,&quot;parentUUID&quot;:&quot;230bb7bc-1db2-4d65-b68c-4e171c8bc9dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to register user identifier with missing fields&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifier should fail to register user identifier with missing fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/register`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({})\n    .expect(400);\n(0, chai_1.expect)(response).to.throws;\n(0, chai_1.expect)(response.body).to.have.property(\&quot;errors\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;121fa6e5-4f1c-46a0-a4be-14b315897404&quot;,&quot;parentUUID&quot;:&quot;230bb7bc-1db2-4d65-b68c-4e171c8bc9dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to register user without email and identifier&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifier should fail to register user without email and identifier&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/register`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({\n    users: [{}],\n})\n    .expect(400);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;errors\&quot;);\n(0, chai_1.expect)(response.body.errors[0]).to.deep.include({\n    field: \&quot;email\&quot;,\n    message: \&quot;Email must exist if identifier does not\&quot;,\n});\n(0, chai_1.expect)(response.body.errors[1]).to.deep.include({\n    field: \&quot;identifier\&quot;,\n    message: \&quot;identifier must exist if email does not\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5093695-c9f9-405f-ac19-4a75b7b20f50&quot;,&quot;parentUUID&quot;:&quot;230bb7bc-1db2-4d65-b68c-4e171c8bc9dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c14ca36e-35f1-4661-9703-bbfda6da78ab&quot;,&quot;42d3837b-b204-4577-8380-6efd297e90a5&quot;,&quot;121fa6e5-4f1c-46a0-a4be-14b315897404&quot;,&quot;b5093695-c9f9-405f-ac19-4a75b7b20f50&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:200,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000},{&quot;uuid&quot;:&quot;b4b04257-bf3e-4de3-9c71-a9ff1d81d371&quot;,&quot;title&quot;:&quot;registerUserIdentifiers&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts&quot;,&quot;file&quot;:&quot;\\src\\tests\\users.spec.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register new user identifiers from CSV&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifiers should register new user identifiers from CSV&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/registers`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({\n    users: [\n        { email: \&quot;user1@example.com\&quot;, internalID: \&quot;id1\&quot; },\n        { email: \&quot;user2@example.com\&quot;, internalID: \&quot;id2\&quot; },\n    ],\n})\n    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties if needed&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e613d5eb-30d1-4bd6-a5ad-3def2aa2e1f7&quot;,&quot;parentUUID&quot;:&quot;b4b04257-bf3e-4de3-9c71-a9ff1d81d371&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not register existing user identifiers&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifiers should not register existing user identifiers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/registers`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({\n    users: [\n        { email: \&quot;user1@example.com\&quot;, internalID: \&quot;id1\&quot; },\n        { email: \&quot;user2@example.com\&quot;, internalID: \&quot;id2\&quot; },\n    ],\n});\n(0, chai_1.expect)(400);\n//error message inapropriate&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a907130-af39-4d86-8e6c-52ab6900d952&quot;,&quot;parentUUID&quot;:&quot;b4b04257-bf3e-4de3-9c71-a9ff1d81d371&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to register user identifiers with missing fields&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifiers should fail to register user identifiers with missing fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/register`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({})\n    .expect(400);\n(0, chai_1.expect)(response).to.throws;\n(0, chai_1.expect)(response.body).to.have.property(\&quot;error\&quot;, \&quot;Missing or invalid fields\&quot;);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;errors\&quot;).that.is.an(\&quot;array\&quot;);\n(0, chai_1.expect)(response.body.errors).to.deep.include({\n    field: \&quot;email\&quot;,\n    message: \&quot;Email must exist if identifier does not\&quot;,\n});\n(0, chai_1.expect)(response.body.errors).to.deep.include({\n    field: \&quot;identifier\&quot;,\n    message: \&quot;identifier must exist if email does not\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;613af32d-1111-4dac-b62a-78b4f8dc7dbf&quot;,&quot;parentUUID&quot;:&quot;b4b04257-bf3e-4de3-9c71-a9ff1d81d371&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to register user without email and identifier&quot;,&quot;fullTitle&quot;:&quot;Users Routes Tests registerUserIdentifiers should fail to register user without email and identifier&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const response = await (0, supertest_1.default)(serverInstance.app)\n    .post(`/v1/users/registers`)\n    .set(\&quot;Authorization\&quot;, participantJWT)\n    .send({\n    users: [{}],\n})\n    .expect(400);\n(0, chai_1.expect)(response.body).to.have.property(\&quot;errors\&quot;);\n(0, chai_1.expect)(response.body.errors[0]).to.deep.include({\n    field: \&quot;email\&quot;,\n    message: \&quot;Email must exist if identifier does not\&quot;,\n});\n(0, chai_1.expect)(response.body.errors[1]).to.deep.include({\n    field: \&quot;identifier\&quot;,\n    message: \&quot;identifier must exist if email does not\&quot;,\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68718945-19ad-4e6f-b5e6-9540f647a4d8&quot;,&quot;parentUUID&quot;:&quot;b4b04257-bf3e-4de3-9c71-a9ff1d81d371&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e613d5eb-30d1-4bd6-a5ad-3def2aa2e1f7&quot;,&quot;9a907130-af39-4d86-8e6c-52ab6900d952&quot;,&quot;613af32d-1111-4dac-b62a-78b4f8dc7dbf&quot;,&quot;68718945-19ad-4e6f-b5e6-9540f647a4d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:193,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:4000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:4000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.4.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;consent-manager&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>