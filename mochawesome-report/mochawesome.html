<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mochawesome Report</title>
    <link rel="stylesheet" href="assets/app.css" />
  </head>
  <body>
    data-raw='{"stats":{"suites":17,"tests":45,"passes":45,"pending":0,"failures":0,"start":"2024-06-28T12:08:07.001Z","end":"2024-06-28T12:08:09.749Z","duration":2748,"testsRegistered":45,"passPercent":100,"pendingPercent":0,"other":0,"hasOther":false,"skipped":0,"hasSkipped":false},"results":[{"uuid":"2cc5b47f-777f-4357-a662-c7e257e9c3e2","title":"","fullFile":"","file":"","beforeHooks":[{"title":"\"before
    all\" hook in \"{root}\"","fullTitle":"\"before all\" hook in
    \"{root}\"","timedOut":false,"duration":78,"pass":false,"fail":false,"pending":false,"code":"console.log(process.env.MONGO_URI_TEST);\nawait
    mongoose_1.default.connect(process.env.MONGO_URI_TEST);\nawait
    mongoose_1.default.connection.db.dropDatabase();","err":{},"uuid":"2c08017a-c5ac-418d-9dec-c8ddc24e634f","parentUUID":"2cc5b47f-777f-4357-a662-c7e257e9c3e2","isHook":true,"skipped":false},{"title":"\"before
    all\" hook in \"{root}\"","fullTitle":"\"before all\" hook in
    \"{root}\"","timedOut":false,"duration":37,"pass":false,"fail":false,"pending":false,"code":"serverInstance
    = (0,
    server_1.startServer)(9091);","err":{},"uuid":"145b31c8-b45f-42ec-a155-50f931e2030e","parentUUID":"2cc5b47f-777f-4357-a662-c7e257e9c3e2","isHook":true,"skipped":false},{"title":"\"before
    all\" hook in \"{root}\"","fullTitle":"\"before all\" hook in
    \"{root}\"","timedOut":false,"duration":191,"pass":false,"fail":false,"pending":false,"code":"serverInstance
    = (0, server_1.startServer)(9092);\n//create new participant\nconst
    participantData = testAccount_1.testParticipant3;\nconst response = await
    (0, supertest_1.default)(serverInstance.app)\n .post(`/v1/participants`)\n
    .send(participantData);\n//login the participant\nconst authResponse = await
    (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/participants/login`)\n .send({\n clientID:
    testAccount_1.testParticipant3.clientID,\n clientSecret:
    testAccount_1.testParticipant3.clientSecret,\n});\nparticipantJWT = `Bearer
    ${authResponse.body.jwt}`;","err":{},"uuid":"6065db95-9695-4b28-8282-a78547255544","parentUUID":"2cc5b47f-777f-4357-a662-c7e257e9c3e2","isHook":true,"skipped":false}],"afterHooks":[{"title":"\"after
    all\" hook in \"{root}\"","fullTitle":"\"after all\" hook in
    \"{root}\"","timedOut":false,"duration":14,"pass":false,"fail":false,"pending":false,"code":"console.log(process.env.MONGO_URI_TEST);\nawait
    mongoose_1.default.connection.close();","err":{},"uuid":"c4b90947-e783-40ad-859b-755c55930e90","parentUUID":"2cc5b47f-777f-4357-a662-c7e257e9c3e2","isHook":true,"skipped":false},{"title":"\"after
    all\" hook in \"{root}\"","fullTitle":"\"after all\" hook in
    \"{root}\"","timedOut":false,"duration":1,"pass":false,"fail":false,"pending":false,"code":"serverInstance.server.close();","err":{},"uuid":"6b9cf22f-e5bd-4392-bd16-37ef5471fba3","parentUUID":"2cc5b47f-777f-4357-a662-c7e257e9c3e2","isHook":true,"skipped":false},{"title":"\"after
    all\" hook in \"{root}\"","fullTitle":"\"after all\" hook in
    \"{root}\"","timedOut":false,"duration":1,"pass":false,"fail":false,"pending":false,"code":"serverInstance.server.close();","err":{},"uuid":"ab1908bf-3fdf-470e-a084-b46ab4a53955","parentUUID":"2cc5b47f-777f-4357-a662-c7e257e9c3e2","isHook":true,"skipped":false}],"tests":[],"suites":[{"uuid":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","title":"Consent
    Routes
    Tests","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\consents.spec.ts","file":"\\src\\tests\\consents.spec.ts","beforeHooks":[{"title":"\"before
    all\" hook in \"Consent Routes Tests\"","fullTitle":"Consent Routes Tests
    \"before all\" hook in \"Consent Routes
    Tests\"","timedOut":false,"duration":399,"pass":false,"fail":false,"pending":false,"code":"nock_1.default.cleanAll();\nserverInstance
    = (0, server_1.startServer)(9090);\n// Create Provider\nconst providerData =
    testAccount_1.testProvider1;\nconst providerResponse = await (0,
    supertest_1.default)(serverInstance.app)\n .post(`/v1/participants/`)\n
    .send(providerData);\nproviderId =
    providerResponse.body._id;\nselfDesc_providerId =
    providerData.selfDescriptionURL;\n// Login provider\nconst
    providerAuthResponse = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/participants/login`)\n .send({\n clientID:
    testAccount_1.testProvider1.clientID,\n clientSecret:
    testAccount_1.testProvider1.clientSecret,\n});\nproviderJWT = `Bearer
    ${providerAuthResponse.body.jwt}`;\nproviderBase64 =
    Buffer.from(providerData.selfDescriptionURL).toString(\"base64\");\n//
    Create Consumer\nconst consumerData = testAccount_1.testConsumer1;\nconst
    consumerResponse = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/participants/`)\n .send(consumerData);\nconsumerId =
    consumerResponse.body._id;\nselfDesc_consumerId =
    consumerData.selfDescriptionURL;\n// Login consumer\nconst
    consumerAuthResponse = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/participants/login`)\n .send({\n clientID:
    testAccount_1.testConsumer1.clientID,\n clientSecret:
    testAccount_1.testConsumer1.clientSecret,\n});\nconsumerJWT = `Bearer
    ${consumerAuthResponse.body.jwt}`;\nconsumerBase64 =
    Buffer.from(consumerData.selfDescriptionURL).toString(\"base64\");\n//
    Create User\nconst userData = testAccount_1.testUser1;\nconst userResponse =
    await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/signup`)\n .send(userData);\nuserId =
    userResponse.body.user._id;\n// Login user\nconst userAuthresponse = await
    (0, supertest_1.default)(serverInstance.app)\n .post(`/v1/users/login`)\n
    .send({\n email: testAccount_1.testUser1.email,\n password:
    testAccount_1.testUser1.password,\n});\nuserJwt = `Bearer
    ${userAuthresponse.body.accessToken}`;\n// Create UserIdentifier
    Provider\nconst providerUserIdentifierResponse = await (0,
    supertest_1.default)(serverInstance.app)\n .post(`/v1/users/register`)\n
    .set(\"Authorization\", providerJWT)\n .send({\n email:
    testAccount_1.testUser1.email,\n identifier:
    \"providerUserIdentifier1\",\n});\nproviderUserIdentifier =
    providerUserIdentifierResponse.body._id;\n// Create UserIdentifier
    Consumer\nconst consumerUserIdentifierResponse = await (0,
    supertest_1.default)(serverInstance.app)\n .post(`/v1/users/register`)\n
    .set(\"Authorization\", consumerJWT)\n .send({\n email:
    testAccount_1.testUser1.email,\n identifier:
    \"consumerUserIdentifier1\",\n});\nconsumerUserIdentifier =
    consumerUserIdentifierResponse.body._id;","err":{},"uuid":"380fe488-4b79-44cf-9c3c-0c7c171cd1c6","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":true,"skipped":false}],"afterHooks":[{"title":"\"after
    all\" hook in \"Consent Routes Tests\"","fullTitle":"Consent Routes Tests
    \"after all\" hook in \"Consent Routes
    Tests\"","timedOut":false,"duration":1,"pass":false,"fail":false,"pending":false,"code":"serverInstance.server.close();","err":{},"uuid":"1b854631-b7c7-42c1-956f-2a982063ff73","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":true,"skipped":false}],"tests":[{"title":"should
    get available exchanges","fullTitle":"Consent Routes Tests should get
    available
    exchanges","timedOut":false,"duration":169,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/exchanges/as?as=provider`)\n .set(\"Authorization\",
    providerJWT);\n(0, chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"participant\");\n(0,
    chai_1.expect)(response.body).to.have.property(\"exchanges\");\n(0,
    chai_1.expect)(response.body.participant).to.have.property(\"selfDescription\");\n(0,
    chai_1.expect)(response.body.participant).to.have.property(\"base64SelfDescription\");","err":{},"uuid":"13c8d0a8-d933-494e-bb3b-de566f1e1850","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    get the privacy notices","fullTitle":"Consent Routes Tests should get the
    privacy
    notices","timedOut":false,"duration":154,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/${userId}/${providerBase64}/${consumerBase64}`)\n
    .set(\"x-user-key\", providerUserIdentifier);\nprivacyNoticeId =
    response.body[0]?._id;\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;\n(0,
    chai_1.expect)(response.body[0]).to.have.property(\"_id\");\n(0,
    chai_1.expect)(response.body[0]).to.have.property(\"dataProvider\",
    \"https://api.test.com/v1/catalog/participants/656dfb3e282d47cfa6b66b2b\");\n(0,
    chai_1.expect)(response.body[0]).to.have.property(\"contract\",
    \"http://localhost:8888/contracts/65e5d715c99e484e4685a964\");","err":{},"uuid":"c67a02b7-e662-48fb-b260-99c6a1ba33a6","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    get a privacy notice by id","fullTitle":"Consent Routes Tests should get a
    privacy notice by
    id","timedOut":false,"duration":146,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/privacy-notices/${privacyNoticeId}`)\n
    .set(\"x-user-key\", providerUserIdentifier);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;\n(0,
    chai_1.expect)(response.body).to.have.property(\"_id\").and.to.equal(privacyNoticeId);\n(0,
    chai_1.expect)(response.body).to.have.property(\"contract\");\n(0,
    chai_1.expect)(response.body.dataProvider._id).to.equal(testAccount_1.testProvider1.identifier);","err":{},"uuid":"39b354f1-258a-423d-b31d-a542013ca6f0","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    give consent","fullTitle":"Consent Routes Tests should give
    consent","timedOut":false,"duration":179,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n .post(`/v1/consents`)\n
    .set(\"x-user-key\", providerUserIdentifier)\n .send({\n privacyNoticeId:
    privacyNoticeId,\n});\nconsentId = response.body._id;\n(0,
    chai_1.expect)(response.status).to.be.equal(201);\n//
    expect(response.body.user).to.equal(userId);\n(0,
    chai_1.expect)(response.body.providerUserIdentifier).to.equal(providerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consented).to.equal(true);\n(0,
    chai_1.expect)(response.body.dataProvider).to.equal(providerId);\n(0,
    chai_1.expect)(response.body.dataConsumer).to.equal(consumerId);\n(0,
    chai_1.expect)(response.body.privacyNotice).to.equal(privacyNoticeId);\n(0,
    chai_1.expect)(response.body.status).to.equal(\"granted\");","err":{},"uuid":"7454ee01-51f0-4607-b7b7-3e12351fe5e5","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    triggerDataExchange","fullTitle":"Consent Routes Tests should
    triggerDataExchange","timedOut":false,"duration":52,"state":"passed","speed":"medium","pass":true,"fail":false,"pending":false,"code":"//
    mocking export consent\n(0,
    nock_1.default)(\"https://test.consent\").post(\"/consent/export\").reply(200,
    {\n message: \"ok\",\n token,\n dataExchangeId:
    \"5f6dd4e3495aebd3aca59529\",\n});\n(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .post(`/v1/consents/${consentId}/data-exchange`)\n .set(\"x-user-key\",
    providerUserIdentifier);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"successfully
    sent consent to the provider&#x27;s consent export endpoint to trigger the
    data
    exchange\");","err":{},"uuid":"5bb81912-8157-488c-9875-2d7d76afbad9","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"generate
    pdi-iframe","fullTitle":"Consent Routes Tests generate
    pdi-iframe","timedOut":false,"duration":69,"state":"passed","speed":"medium","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\n//TODO //nock PDI_ENDPOINT\nconst
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/pdi/iframe`)\n //
    `/v1/consents/iframe?pdiURL=https%3A%2F%2Fapi.preprod.trustedauthority.io%2Fv1%2Fparticipants%2F6484ffaf86e33f792f17d112`\n
    .set(\"Authorization\", providerJWT)\n
    .expect(302);","err":{},"uuid":"1ac3a33b-10c5-44df-aa58-aa2497997e6a","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"generate
    pdi-iframe by privacy notice Id","fullTitle":"Consent Routes Tests generate
    pdi-iframe by privacy notice
    Id","timedOut":false,"duration":23,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n .get(`/v1/consents/pdi/iframe`)\n
    //
    `/v1/consents/iframe?pdiURL=https%3A%2F%2Fapi.preprod.trustedauthority.io%2Fv1%2Fparticipants%2F6484ffaf86e33f792f17d112`\n
    .set(\"Authorization\", providerJWT)\n .query({\n userIdentifier:
    providerUserIdentifier,\n privacyNoticeId: privacyNoticeId,\n})\n
    .expect(302);","err":{},"uuid":"559e97c6-0355-4aa0-9c29-9034c13ccd57","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"getUserAvailableExchanges","fullTitle":"Consent
    Routes Tests
    getUserAvailableExchanges","timedOut":false,"duration":17,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/exchanges/user`)\n .set(\"Authorization\", userJwt)\n
    .query({ participantId: providerId })\n .expect(200);\ncontractbase64 =
    response.body.exchanges[0].base64Contract;\n(0,
    chai_1.expect)(response.body.participant.selfDescription).to.equal(selfDesc_providerId);\n(0,
    chai_1.expect)(response.body.exchanges).to.not.be.empty;\n(0,
    chai_1.expect)(response.body.exchanges[0].participantSelfDescription).to.equal(selfDesc_consumerId);","err":{},"uuid":"74317095-091a-45a8-9fb7-357508ce54ba","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"getUserPrivacyNoticesByContract","fullTitle":"Consent
    Routes Tests
    getUserPrivacyNoticesByContract","timedOut":false,"duration":51,"state":"passed","speed":"medium","pass":true,"fail":false,"pending":false,"code":"(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/${providerUserIdentifier}/${providerBase64}/${consumerBase64}/${contractbase64}`)\n
    .set(\"Authorization\", userJwt)\n
    .expect(200);\nconsole.log(\"contractrbase64:\", contractbase64);\n(0,
    chai_1.expect)(response.body[0].dataProvider).to.equal(selfDesc_providerId);\n(0,
    chai_1.expect)(response.body[0].recipients).to.deep.include(selfDesc_consumerId);","err":{},"uuid":"42ade933-e730-45d7-b575-756805382ab2","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"getUserPrivacyNoticeById","fullTitle":"Consent
    Routes Tests
    getUserPrivacyNoticeById","timedOut":false,"duration":25,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/privacy-notices/${privacyNoticeId}/user`)\n
    .set(\"Authorization\", userJwt)\n .expect(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"_id\");\n(0,
    chai_1.expect)(response.body.contract.orchestrator).to.equal(testAccount_1.testProvider1.did);\n(0,
    chai_1.expect)(response.body.contract.status).to.equal(\"pending\");\n(0,
    chai_1.expect)(response.body.dataProvider._id).to.equal(testAccount_1.testProvider1.identifier);\n(0,
    chai_1.expect)(response.body.purposes[0].providedBy).to.equal(testAccount_1.testConsumer1.identifier);\n(0,
    chai_1.expect)(response.body.data[0].providedBy).to.equal(testAccount_1.testProvider1.identifier);","err":{},"uuid":"cc5e3de4-fbac-429b-81f0-60338ffdbe4e","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    getUserConsents - by user","fullTitle":"Consent Routes Tests should
    getUserConsents - by
    user","timedOut":false,"duration":23,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/me`)\n .set(\"x-user-key\", providerUserIdentifier);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"consents\");\n(0,
    chai_1.expect)(response.body.consents[0]._id).to.equal(consentId);\n(0,
    chai_1.expect)(response.body.consents[0].providerUserIdentifier).to.equal(providerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consents[0].consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consents[0].consented).to.equal(true);\n(0,
    chai_1.expect)(response.body.consents[0].dataProvider).to.equal(providerId);\n(0,
    chai_1.expect)(response.body.consents[0].dataConsumer).to.equal(consumerId);\n(0,
    chai_1.expect)(response.body.consents[0].status).to.equal(\"granted\");\n(0,
    chai_1.expect)(response.body.consents[0].privacyNotice).to.equal(privacyNoticeId);","err":{},"uuid":"e57a86a9-24ba-4c27-9e7d-02bac9cf188b","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    getUserConsents - by participant","fullTitle":"Consent Routes Tests should
    getUserConsents - by
    participant","timedOut":false,"duration":29,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/participants/${providerUserIdentifier}/`)\n
    .set(\"Authorization\", providerJWT);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"consents\");\n(0,
    chai_1.expect)(response.body.consents[0]._id).to.equal(consentId);\n(0,
    chai_1.expect)(response.body.consents[0].providerUserIdentifier).to.equal(providerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consents[0].consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consents[0].consented).to.equal(true);\n(0,
    chai_1.expect)(response.body.consents[0].dataProvider).to.equal(providerId);\n(0,
    chai_1.expect)(response.body.consents[0].dataConsumer).to.equal(consumerId);\n(0,
    chai_1.expect)(response.body.consents[0].status).to.equal(\"granted\");\n(0,
    chai_1.expect)(response.body.consents[0].privacyNotice).to.equal(privacyNoticeId);","err":{},"uuid":"e3da80ef-574f-42a8-9cdb-b6e69620a97e","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    getUserConsentById - by user","fullTitle":"Consent Routes Tests should
    getUserConsentById - by
    user","timedOut":false,"duration":16,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/me/${consentId}`)\n .set(\"x-user-key\",
    providerUserIdentifier);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body._id).to.equal(consentId);\n(0,
    chai_1.expect)(response.body.providerUserIdentifier).to.equal(providerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consented).to.equal(true);\n(0,
    chai_1.expect)(response.body.dataProvider).to.equal(providerId);\n(0,
    chai_1.expect)(response.body.dataConsumer).to.equal(consumerId);\n(0,
    chai_1.expect)(response.body.status).to.equal(\"granted\");\n(0,
    chai_1.expect)(response.body.privacyNotice).to.equal(privacyNoticeId);","err":{},"uuid":"850a15e3-f458-44ae-853e-b45370010e04","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    getUserConsentById - by participant","fullTitle":"Consent Routes Tests
    should getUserConsentById - by
    participant","timedOut":false,"duration":22,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/participants/${providerUserIdentifier}/${consentId}`)\n
    .set(\"Authorization\", providerJWT);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body._id).to.equal(consentId);\n(0,
    chai_1.expect)(response.body.providerUserIdentifier).to.equal(providerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consumerUserIdentifier).to.equal(consumerUserIdentifier);\n(0,
    chai_1.expect)(response.body.consented).to.equal(true);\n(0,
    chai_1.expect)(response.body.dataProvider).to.equal(providerId);\n(0,
    chai_1.expect)(response.body.dataConsumer).to.equal(consumerId);\n(0,
    chai_1.expect)(response.body.status).to.equal(\"granted\");\n(0,
    chai_1.expect)(response.body.privacyNotice).to.equal(privacyNoticeId);","err":{},"uuid":"e3820b34-896d-4ad2-b9b9-eaf893361a36","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    attach token to consent","fullTitle":"Consent Routes Tests should attach
    token to
    consent","timedOut":false,"duration":96,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"//Mocking
    import consent\n(0,
    nock_1.default)(\"https://test.consent\").post(\"/consent/import\").reply(200,
    {\n message: \"ok\",\n token,\n dataExchangeId:
    \"5f6dd4e3495aebd3aca59529\",\n});\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .post(`/v1/consents/${consentId}/token`)\n .set(\"Authorization\",
    providerJWT)\n .send({\n token,\n providerDataExchangeId:
    \"5f6dd4e3495aebd3aca59529\",\n});\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"successfully
    forwarded consent to the data
    consumer\");","err":{},"uuid":"82973709-c9ba-487b-b680-08485f8a7b00","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false},{"title":"should
    validate the consent","fullTitle":"Consent Routes Tests should validate the
    consent","timedOut":false,"duration":41,"state":"passed","speed":"medium","pass":true,"fail":false,"pending":false,"code":"//mocking
    export consent\n(0,
    nock_1.default)(\"https://test.consent\").post(\"/consent/export\").reply(200,
    {\n message: \"ok\",\n token,\n dataExchangeId:
    \"5f6dd4e3495aebd3aca59529\",\n});\n(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .post(`/v1/consents/${consentId}/validate`)\n .set(\"Authorization\",
    providerJWT)\n .send({\n token,\n});\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"token matches
    consent token\");\n(0,
    chai_1.expect)(response.body).to.have.property(\"verified\",
    true);","err":{},"uuid":"73b482e8-5000-4e91-a5aa-c803c625a025","parentUUID":"971b16b6-b088-4ef5-9d7d-9ce394961fc0","isHook":false,"skipped":false}],"suites":[{"uuid":"96a2b941-ef84-4698-89d9-21b9e3967707","title":"Test
    error","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\consents.spec.ts","file":"\\src\\tests\\consents.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    not getUserConsents with no authorization","fullTitle":"Consent Routes Tests
    Test error should not getUserConsents with no
    authorization","timedOut":false,"duration":12,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/consents/me`)\n .expect(401);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"Authorization
    header missing or
    invalid\");","err":{},"uuid":"94a5e5af-4f78-473a-93ac-14f2693ed93f","parentUUID":"96a2b941-ef84-4698-89d9-21b9e3967707","isHook":false,"skipped":false},{"title":"should
    not trigger data exchange for a non-existent consent","fullTitle":"Consent
    Routes Tests Test error should not trigger data exchange for a non-existent
    consent","timedOut":false,"duration":18,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"(0,
    nock_1.default)(\"https://test.consent\").post(\"/consent/export\").reply(200,
    {\n message: \"ok\",\n token,\n dataExchangeId:
    \"5f6dd4e3495aebd3aca59529\",\n});\n(0,
    mock_1.setupnockMocks)(providerBase64);\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n
    .post(`/v1/consents/6601a6265cbdad603e4e9a8c/data-exchange`)\n
    .set(\"x-user-key\", providerUserIdentifier)\n .send({ privacyNoticeId:
    privacyNoticeId });\n(0,
    chai_1.expect)(response.status).to.be.equal(404);\n(0,
    chai_1.expect)(response.body).to.have.property(\"error\", \"consent not
    found\");","err":{},"uuid":"f68bef7c-f264-4920-ba42-32f50ae4b718","parentUUID":"96a2b941-ef84-4698-89d9-21b9e3967707","isHook":false,"skipped":false}],"suites":[],"passes":["94a5e5af-4f78-473a-93ac-14f2693ed93f","f68bef7c-f264-4920-ba42-32f50ae4b718"],"failures":[],"pending":[],"skipped":[],"duration":30,"root":false,"rootEmpty":false,"_timeout":4000}],"passes":["13c8d0a8-d933-494e-bb3b-de566f1e1850","c67a02b7-e662-48fb-b260-99c6a1ba33a6","39b354f1-258a-423d-b31d-a542013ca6f0","7454ee01-51f0-4607-b7b7-3e12351fe5e5","5bb81912-8157-488c-9875-2d7d76afbad9","1ac3a33b-10c5-44df-aa58-aa2497997e6a","559e97c6-0355-4aa0-9c29-9034c13ccd57","74317095-091a-45a8-9fb7-357508ce54ba","42ade933-e730-45d7-b575-756805382ab2","cc5e3de4-fbac-429b-81f0-60338ffdbe4e","e57a86a9-24ba-4c27-9e7d-02bac9cf188b","e3da80ef-574f-42a8-9cdb-b6e69620a97e","850a15e3-f458-44ae-853e-b45370010e04","e3820b34-896d-4ad2-b9b9-eaf893361a36","82973709-c9ba-487b-b680-08485f8a7b00","73b482e8-5000-4e91-a5aa-c803c625a025"],"failures":[],"pending":[],"skipped":[],"duration":1112,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"4b2198f6-1fda-4ac7-8101-f9527f57cb8c","title":"Participant
    Routes
    Tests","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[],"suites":[{"uuid":"ab254105-ec91-44bf-a156-4c4752ee35f7","title":"registerParticipant","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    register a new participant","fullTitle":"Participant Routes Tests
    registerParticipant should register a new
    participant","timedOut":false,"duration":22,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    participantData = testAccount_1.testParticipant2;\nconst response = await
    (0, supertest_1.default)(serverInstance.app)\n .post(`/v1/participants/`)\n
    .send(participantData);\nparticipantId = response.body._id;\n(0,
    chai_1.expect)(response.status).to.be.equal(201);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;","err":{},"uuid":"3e46c95a-bbc9-4bd6-94a0-de9319f891a0","parentUUID":"ab254105-ec91-44bf-a156-4c4752ee35f7","isHook":false,"skipped":false},{"title":"should
    fail to register existing participant","fullTitle":"Participant Routes Tests
    registerParticipant should fail to register existing
    participant","timedOut":false,"duration":13,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"//
    Assuming the participant with client ID &#x27;existingClient&#x27; already
    exists in the database\nconst existingParticipantData =
    testAccount_1.testExistingPrticipant;\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n .post(`/v1/participants`)\n
    .send(existingParticipantData)\n .expect(409);\n(0,
    chai_1.expect)(response.body).to.have.property(\"error\", \"Participant
    already
    exists\");","err":{},"uuid":"02d1667b-d5d2-4f8e-8746-c9e4cd1092c2","parentUUID":"ab254105-ec91-44bf-a156-4c4752ee35f7","isHook":false,"skipped":false}],"suites":[],"passes":["3e46c95a-bbc9-4bd6-94a0-de9319f891a0","02d1667b-d5d2-4f8e-8746-c9e4cd1092c2"],"failures":[],"pending":[],"skipped":[],"duration":35,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"92434587-e171-4c17-85d2-64d1902452f9","title":"getParticipantById","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    get participant by ID","fullTitle":"Participant Routes Tests
    getParticipantById should get participant by
    ID","timedOut":false,"duration":11,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0,
    supertest_1.default)(serverInstance.app).get(`/v1/participants/${participantId}`);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties
    if
    needed","err":{},"uuid":"7d46469b-549b-49fc-abe6-27cfcabe5e9d","parentUUID":"92434587-e171-4c17-85d2-64d1902452f9","isHook":false,"skipped":false},{"title":"should
    fail to get non-existing participant","fullTitle":"Participant Routes Tests
    getParticipantById should fail to get non-existing
    participant","timedOut":false,"duration":11,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0,
    supertest_1.default)(serverInstance.app).get(`/v1/participants/65eed1cd59f9242b784f2494`);\n(0,
    chai_1.expect)(response.status).to.be.equal(404);\n(0,
    chai_1.expect)(response.body).to.have.property(\"error\", \"participant not
    found\");","err":{},"uuid":"bcbccb88-9108-4da3-bb28-b776cd8fc717","parentUUID":"92434587-e171-4c17-85d2-64d1902452f9","isHook":false,"skipped":false}],"suites":[],"passes":["7d46469b-549b-49fc-abe6-27cfcabe5e9d","bcbccb88-9108-4da3-bb28-b776cd8fc717"],"failures":[],"pending":[],"skipped":[],"duration":22,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"ef43be7b-6b4f-4ccc-aa0a-dd0ad41c673e","title":"getParticipantByClientId","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    get participant by client ID","fullTitle":"Participant Routes Tests
    getParticipantByClientId should get participant by client
    ID","timedOut":false,"duration":11,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"//
    Assuming there&#x27;s a participant with client ID &#x27;client123&#x27; in
    the database\nconst response = await (0,
    supertest_1.default)(serverInstance.app).get(`/v1/participants/clientId/bI8fbrUoT4th4zMXRqCV6YVxpPknLDHttLVLG6Pgtm4JQlMInSJscxZnEDZxQBQBv2BP2M6QFYbDAQrD3ibnsWpYySIFr4w27DKQ`);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties
    if
    needed","err":{},"uuid":"c693aef6-3392-4cb1-abf1-6712befa3ea5","parentUUID":"ef43be7b-6b4f-4ccc-aa0a-dd0ad41c673e","isHook":false,"skipped":false},{"title":"should
    fail to get participant with non-existing client
    ID","fullTitle":"Participant Routes Tests getParticipantByClientId should
    fail to get participant with non-existing client
    ID","timedOut":false,"duration":11,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0,
    supertest_1.default)(serverInstance.app).get(`/v1/participants/clientId/nonExistingClientId`);\n(0,
    chai_1.expect)(response.status).to.be.equal(404);\n(0,
    chai_1.expect)(response.body).to.have.property(\"error\", \"participant not
    found\");","err":{},"uuid":"e82a9c19-a3c0-40e1-92b1-0db8e39ea806","parentUUID":"ef43be7b-6b4f-4ccc-aa0a-dd0ad41c673e","isHook":false,"skipped":false}],"suites":[],"passes":["c693aef6-3392-4cb1-abf1-6712befa3ea5","e82a9c19-a3c0-40e1-92b1-0db8e39ea806"],"failures":[],"pending":[],"skipped":[],"duration":22,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"7ace6d97-22e2-46d5-a6f4-741b5e157ca9","title":"loginParticipant","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    login participant with valid credentials","fullTitle":"Participant Routes
    Tests loginParticipant should login participant with valid
    credentials","timedOut":false,"duration":14,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    providerAuthResponse = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/participants/login`)\n .send({\n clientID:
    testAccount_1.testParticipant2.clientID,\n clientSecret:
    testAccount_1.testParticipant2.clientSecret,\n});\n(0,
    chai_1.expect)(providerAuthResponse.status).to.be.equal(200);\nparticipantJwt
    = `Bearer ${providerAuthResponse.body.jwt}`;\n(0,
    chai_1.expect)(providerAuthResponse.body).to.have.property(\"success\",
    true);\n(0,
    chai_1.expect)(providerAuthResponse.body).to.have.property(\"jwt\");\n(0,
    chai_1.expect)(providerAuthResponse.body).to.have.property(\"message\");","err":{},"uuid":"b8f23719-0675-4763-86a9-dbc551c4d6e2","parentUUID":"7ace6d97-22e2-46d5-a6f4-741b5e157ca9","isHook":false,"skipped":false},{"title":"should
    fail to login participant with invalid credentials","fullTitle":"Participant
    Routes Tests loginParticipant should fail to login participant with invalid
    credentials","timedOut":false,"duration":13,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/participants/login`)\n .send({\n clientID:
    \"nonExistingClient\",\n clientSecret: \"invalidSecret\",\n})\n
    .expect(404);\n(0, chai_1.expect)(response.body).to.have.property(\"error\",
    \"participant not
    found\");","err":{},"uuid":"603b8ef7-49a8-4149-bb70-65d3ca47df4e","parentUUID":"7ace6d97-22e2-46d5-a6f4-741b5e157ca9","isHook":false,"skipped":false}],"suites":[],"passes":["b8f23719-0675-4763-86a9-dbc551c4d6e2","603b8ef7-49a8-4149-bb70-65d3ca47df4e"],"failures":[],"pending":[],"skipped":[],"duration":27,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"737abf5c-1a39-43d7-9fd8-d8e075788dd4","title":"updateParticipantByClientId","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    update participant by client ID","fullTitle":"Participant Routes Tests
    updateParticipantByClientId should update participant by client
    ID","timedOut":false,"duration":24,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    updatedParticipantData = testAccount_1.testupdatedPrticipant;\nconst
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .put(`/v1/participants/clientId/bI8fbrUoT4th4zMXRqCV6YVxpPknLDHttLVLG6Pgtm4JQlMInSJscxZnEDZxQBQBv2BP2M6QFYbDAQrD3ibnsWpYySIFr4w27DKQ`)\n
    .send(updatedParticipantData)\n .set(\"Authorization\", participantJwt)\n
    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert
    other properties if
    needed","err":{},"uuid":"1f5f8a85-f508-4d4f-baa6-927c116685f9","parentUUID":"737abf5c-1a39-43d7-9fd8-d8e075788dd4","isHook":false,"skipped":false},{"title":"should
    fail to update participant with non-existing client
    ID","fullTitle":"Participant Routes Tests updateParticipantByClientId should
    fail to update participant with non-existing client
    ID","timedOut":false,"duration":11,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0,
    supertest_1.default)(serverInstance.app).get(`/v1/participants/clientId/nonExistingClientId`);\n(0,
    chai_1.expect)(response.status).to.be.equal(404);\n(0,
    chai_1.expect)(response.body).to.have.property(\"error\", \"participant not
    found\");","err":{},"uuid":"97f13fb7-7130-4419-96a2-3316593cbb2f","parentUUID":"737abf5c-1a39-43d7-9fd8-d8e075788dd4","isHook":false,"skipped":false}],"suites":[],"passes":["1f5f8a85-f508-4d4f-baa6-927c116685f9","97f13fb7-7130-4419-96a2-3316593cbb2f"],"failures":[],"pending":[],"skipped":[],"duration":35,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"b233cc99-a059-48be-a7ec-0d79ed729146","title":"getAllParticipants","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    get all participants","fullTitle":"Participant Routes Tests
    getAllParticipants should get all
    participants","timedOut":false,"duration":15,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0,
    supertest_1.default)(serverInstance.app).get(`/v1/participants/`);\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties
    if
    needed","err":{},"uuid":"646aaf70-df41-416c-be16-ae3eff119396","parentUUID":"b233cc99-a059-48be-a7ec-0d79ed729146","isHook":false,"skipped":false}],"suites":[],"passes":["646aaf70-df41-416c-be16-ae3eff119396"],"failures":[],"pending":[],"skipped":[],"duration":15,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"105bc7f7-dc28-4d4a-a017-e77d41075b63","title":"getMyParticipant","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    getMyParticipant","fullTitle":"Participant Routes Tests getMyParticipant
    should
    getMyParticipant","timedOut":false,"duration":18,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/participants/me`)\n .set(\"Authorization\", participantJwt)\n
    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert
    other properties if
    needed","err":{},"uuid":"dee99be1-fd8a-40cb-9bfd-504d49b55997","parentUUID":"105bc7f7-dc28-4d4a-a017-e77d41075b63","isHook":false,"skipped":false}],"suites":[],"passes":["dee99be1-fd8a-40cb-9bfd-504d49b55997"],"failures":[],"pending":[],"skipped":[],"duration":18,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"efac97ad-2e10-4e32-b3b5-e8837919941f","title":"deleteParticipant","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\participants.spec.ts","file":"\\src\\tests\\participants.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    delete participant","fullTitle":"Participant Routes Tests deleteParticipant
    should delete
    participant","timedOut":false,"duration":19,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .delete(`/v1/participants/me`)\n .set(\"Authorization\", participantJwt)\n
    .expect(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"Participant
    deleted
    successfully\");","err":{},"uuid":"440d743e-dae2-4899-b654-e50a7d67061c","parentUUID":"efac97ad-2e10-4e32-b3b5-e8837919941f","isHook":false,"skipped":false}],"suites":[],"passes":["440d743e-dae2-4899-b654-e50a7d67061c"],"failures":[],"pending":[],"skipped":[],"duration":19,"root":false,"rootEmpty":false,"_timeout":4000}],"passes":[],"failures":[],"pending":[],"skipped":[],"duration":0,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"259521b2-b4ed-4ac8-bc04-b1dc6b724f3b","title":"Users
    Routes
    Tests","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts","file":"\\src\\tests\\users.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[],"suites":[{"uuid":"0fb7fab1-3583-4e49-8655-24a8dffa0816","title":"signup","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts","file":"\\src\\tests\\users.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    create a new user","fullTitle":"Users Routes Tests signup should create a
    new
    user","timedOut":false,"duration":111,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"const
    userData = testAccount_1.testUser2;\nconst response = await (0,
    supertest_1.default)(serverInstance.app)\n .post(`/v1/users/signup`)\n
    .send(userData);\nuserId = response.body.user._id;\n(0,
    chai_1.expect)(response.status).to.be.equal(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"user\");\n(0,
    chai_1.expect)(response.body.user).to.have.property(\"firstName\",
    \"John\");\n(0,
    chai_1.expect)(response.body.user).to.have.property(\"lastName\",
    \"Doe\");\n(0,
    chai_1.expect)(response.body.user).to.have.property(\"email\",
    \"john@example.com\");\n(0,
    chai_1.expect)(response.body).to.have.property(\"accessToken\");\n(0,
    chai_1.expect)(response.body).to.have.property(\"refreshToken\");","err":{},"uuid":"c938f0b1-3294-43b0-969f-d6fd7e7dc7ba","parentUUID":"0fb7fab1-3583-4e49-8655-24a8dffa0816","isHook":false,"skipped":false}],"suites":[],"passes":["c938f0b1-3294-43b0-969f-d6fd7e7dc7ba"],"failures":[],"pending":[],"skipped":[],"duration":111,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"468ee25b-d819-4518-942a-c8487123081f","title":"login
    user","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts","file":"\\src\\tests\\users.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    login an existing user","fullTitle":"Users Routes Tests login user should
    login an existing
    user","timedOut":false,"duration":122,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/login`)\n .send({\n email: testAccount_1.testUser2.email,\n
    password: testAccount_1.testUser2.password,\n})\n .expect(200);\n(0,
    chai_1.expect)(response.body).to.have.property(\"user\");\n(0,
    chai_1.expect)(response.body.user).to.have.property(\"firstName\",
    \"John\");\n(0,
    chai_1.expect)(response.body.user).to.have.property(\"lastName\",
    \"Doe\");\n(0,
    chai_1.expect)(response.body.user).to.have.property(\"email\",
    \"john@example.com\");\n(0,
    chai_1.expect)(response.body).to.have.property(\"accessToken\");\n(0,
    chai_1.expect)(response.body).to.have.property(\"refreshToken\");","err":{},"uuid":"95a641b1-8e50-4cb0-a4ba-89ef6a3bf122","parentUUID":"468ee25b-d819-4518-942a-c8487123081f","isHook":false,"skipped":false},{"title":"should
    fail to login with invalid credentials","fullTitle":"Users Routes Tests
    login user should fail to login with invalid
    credentials","timedOut":false,"duration":95,"state":"passed","speed":"slow","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/login`)\n .send({\n email: \"john@example.com\",\n
    password: \"wrongpassword\",\n})\n .expect(400);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"invalid
    credentials\");","err":{},"uuid":"392affc8-d466-4db4-83b1-7b0d21562635","parentUUID":"468ee25b-d819-4518-942a-c8487123081f","isHook":false,"skipped":false},{"title":"should
    fail to login with non-existing user","fullTitle":"Users Routes Tests login
    user should fail to login with non-existing
    user","timedOut":false,"duration":6,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/login`)\n .send({\n email: \"nonexisting@example.com\",\n
    password: \"password\",\n})\n .expect(404);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"User not
    found\");","err":{},"uuid":"1253cc57-a30e-46c8-99ee-4bd4481c9fe2","parentUUID":"468ee25b-d819-4518-942a-c8487123081f","isHook":false,"skipped":false}],"suites":[],"passes":["95a641b1-8e50-4cb0-a4ba-89ef6a3bf122","392affc8-d466-4db4-83b1-7b0d21562635","1253cc57-a30e-46c8-99ee-4bd4481c9fe2"],"failures":[],"pending":[],"skipped":[],"duration":223,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"5714cbac-794b-4c8b-a0bf-27458a6829c3","title":"getUserById","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts","file":"\\src\\tests\\users.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    get user by ID","fullTitle":"Users Routes Tests getUserById should get user
    by
    ID","timedOut":false,"duration":9,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/users/${userId}`)\n .expect(200);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;\n// Assert other properties
    if
    needed","err":{},"uuid":"e20be024-1361-41ba-b173-d74210fc4cd4","parentUUID":"5714cbac-794b-4c8b-a0bf-27458a6829c3","isHook":false,"skipped":false},{"title":"should
    fail to get non-existing user","fullTitle":"Users Routes Tests getUserById
    should fail to get non-existing
    user","timedOut":false,"duration":9,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .get(`/v1/users/65eed1cd59f9242b784f2494`)\n .expect(404);\n(0,
    chai_1.expect)(response.body).to.have.property(\"message\", \"User not
    found\");","err":{},"uuid":"a241fdb4-d22f-44a7-8826-5f55bca3ac89","parentUUID":"5714cbac-794b-4c8b-a0bf-27458a6829c3","isHook":false,"skipped":false}],"suites":[],"passes":["e20be024-1361-41ba-b173-d74210fc4cd4","a241fdb4-d22f-44a7-8826-5f55bca3ac89"],"failures":[],"pending":[],"skipped":[],"duration":18,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"ca571f39-9033-4f7b-ae9b-5bcf838ecd45","title":"registerUserIdentifier","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts","file":"\\src\\tests\\users.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    register a new user identifier","fullTitle":"Users Routes Tests
    registerUserIdentifier should register a new user
    identifier","timedOut":false,"duration":28,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/register`)\n .set(\"Authorization\", participantJWT)\n
    .send({\n email: \"newuser@example.com\",\n identifier:
    \"newidentifier\",\n})\n .expect(200);\n(0,
    chai_1.expect)(response.body).to.not.be.empty;","err":{},"uuid":"e78a451a-034a-4779-ab71-2fdb2fc6f738","parentUUID":"ca571f39-9033-4f7b-ae9b-5bcf838ecd45","isHook":false,"skipped":false},{"title":"should
    fail to register existing user identifier","fullTitle":"Users Routes Tests
    registerUserIdentifier should fail to register existing user
    identifier","timedOut":false,"duration":18,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/register`)\n .set(\"Authorization\", participantJWT)\n
    .send({\n email: \"newuser@example.com\",\n identifier:
    \"newidentifier\",\n})\n .expect(409);\n(0,
    chai_1.expect)(response.body).to.have.property(\"error\", \"User already
    exists\");","err":{},"uuid":"409fa410-9663-4fc3-ab7b-4a6c09616469","parentUUID":"ca571f39-9033-4f7b-ae9b-5bcf838ecd45","isHook":false,"skipped":false},{"title":"should
    fail to register user identifier with missing fields","fullTitle":"Users
    Routes Tests registerUserIdentifier should fail to register user identifier
    with missing
    fields","timedOut":false,"duration":55,"state":"passed","speed":"medium","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/register`)\n .set(\"Authorization\", participantJWT)\n
    .send({})\n .expect(400);\n(0, chai_1.expect)(response).to.throws;\n(0,
    chai_1.expect)(response.body).to.have.property(\"errors\");","err":{},"uuid":"184a3ca7-21ee-4037-b6dc-4d63a54e683a","parentUUID":"ca571f39-9033-4f7b-ae9b-5bcf838ecd45","isHook":false,"skipped":false},{"title":"should
    fail to register user without email and identifier","fullTitle":"Users
    Routes Tests registerUserIdentifier should fail to register user without
    email and
    identifier","timedOut":false,"duration":33,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/register`)\n .set(\"Authorization\", participantJWT)\n
    .send({\n users: [{}],\n})\n .expect(400);\n(0,
    chai_1.expect)(response.body).to.have.property(\"errors\");\n(0,
    chai_1.expect)(response.body.errors[0]).to.deep.include({\n field:
    \"email\",\n message: \"Email must exist if identifier does not\",\n});\n(0,
    chai_1.expect)(response.body.errors[1]).to.deep.include({\n field:
    \"identifier\",\n message: \"identifier must exist if email does
    not\",\n});","err":{},"uuid":"eaadc296-61c9-49e8-9500-5c401cb717f1","parentUUID":"ca571f39-9033-4f7b-ae9b-5bcf838ecd45","isHook":false,"skipped":false}],"suites":[],"passes":["e78a451a-034a-4779-ab71-2fdb2fc6f738","409fa410-9663-4fc3-ab7b-4a6c09616469","184a3ca7-21ee-4037-b6dc-4d63a54e683a","eaadc296-61c9-49e8-9500-5c401cb717f1"],"failures":[],"pending":[],"skipped":[],"duration":134,"root":false,"rootEmpty":false,"_timeout":4000},{"uuid":"8210a845-d4e5-4e46-aeb2-aa722552ba23","title":"registerUserIdentifiers","fullFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\src\\tests\\users.spec.ts","file":"\\src\\tests\\users.spec.ts","beforeHooks":[],"afterHooks":[],"tests":[{"title":"should
    register new user identifiers from CSV","fullTitle":"Users Routes Tests
    registerUserIdentifiers should register new user identifiers from
    CSV","timedOut":false,"duration":26,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/registers`)\n .set(\"Authorization\", participantJWT)\n
    .send({\n users: [\n { email: \"user1@example.com\", internalID: \"id1\"
    },\n { email: \"user2@example.com\", internalID: \"id2\" },\n ],\n})\n
    .expect(200);\n(0, chai_1.expect)(response.body).to.not.be.empty;\n// Assert
    other properties if
    needed","err":{},"uuid":"c1078e73-2d06-4ea2-9cd2-fcd20bae28f7","parentUUID":"8210a845-d4e5-4e46-aeb2-aa722552ba23","isHook":false,"skipped":false},{"title":"should
    not register existing user identifiers","fullTitle":"Users Routes Tests
    registerUserIdentifiers should not register existing user
    identifiers","timedOut":false,"duration":19,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/registers`)\n .set(\"Authorization\", participantJWT)\n
    .send({\n users: [\n { email: \"user1@example.com\", internalID: \"id1\"
    },\n { email: \"user2@example.com\", internalID: \"id2\" },\n ],\n});\n(0,
    chai_1.expect)(400);\n//error message
    inapropriate","err":{},"uuid":"bab35258-be79-4d13-ad57-f6414f5babc2","parentUUID":"8210a845-d4e5-4e46-aeb2-aa722552ba23","isHook":false,"skipped":false},{"title":"should
    fail to register user identifiers with missing fields","fullTitle":"Users
    Routes Tests registerUserIdentifiers should fail to register user
    identifiers with missing
    fields","timedOut":false,"duration":30,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/register`)\n .set(\"Authorization\", participantJWT)\n
    .send({})\n .expect(400);\n(0, chai_1.expect)(response).to.throws;\n(0,
    chai_1.expect)(response.body).to.have.property(\"error\", \"Missing or
    invalid fields\");\n(0,
    chai_1.expect)(response.body).to.have.property(\"errors\").that.is.an(\"array\");\n(0,
    chai_1.expect)(response.body.errors).to.deep.include({\n field: \"email\",\n
    message: \"Email must exist if identifier does not\",\n});\n(0,
    chai_1.expect)(response.body.errors).to.deep.include({\n field:
    \"identifier\",\n message: \"identifier must exist if email does
    not\",\n});","err":{},"uuid":"f1bf0cae-2a26-4f94-85cd-d2821e1bf090","parentUUID":"8210a845-d4e5-4e46-aeb2-aa722552ba23","isHook":false,"skipped":false},{"title":"should
    fail to register user without email and identifier","fullTitle":"Users
    Routes Tests registerUserIdentifiers should fail to register user without
    email and
    identifier","timedOut":false,"duration":23,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"const
    response = await (0, supertest_1.default)(serverInstance.app)\n
    .post(`/v1/users/registers`)\n .set(\"Authorization\", participantJWT)\n
    .send({\n users: [{}],\n})\n .expect(400);\n(0,
    chai_1.expect)(response.body).to.have.property(\"errors\");\n(0,
    chai_1.expect)(response.body.errors[0]).to.deep.include({\n field:
    \"email\",\n message: \"Email must exist if identifier does not\",\n});\n(0,
    chai_1.expect)(response.body.errors[1]).to.deep.include({\n field:
    \"identifier\",\n message: \"identifier must exist if email does
    not\",\n});","err":{},"uuid":"d2fd89a5-f54b-46f3-b382-e0faae384b22","parentUUID":"8210a845-d4e5-4e46-aeb2-aa722552ba23","isHook":false,"skipped":false}],"suites":[],"passes":["c1078e73-2d06-4ea2-9cd2-fcd20bae28f7","bab35258-be79-4d13-ad57-f6414f5babc2","f1bf0cae-2a26-4f94-85cd-d2821e1bf090","d2fd89a5-f54b-46f3-b382-e0faae384b22"],"failures":[],"pending":[],"skipped":[],"duration":98,"root":false,"rootEmpty":false,"_timeout":4000}],"passes":[],"failures":[],"pending":[],"skipped":[],"duration":0,"root":false,"rootEmpty":false,"_timeout":4000}],"passes":[],"failures":[],"pending":[],"skipped":[],"duration":0,"root":true,"rootEmpty":true,"_timeout":4000}],"meta":{"mocha":{"version":"10.4.0"},"mochawesome":{"options":{"quiet":false,"reportFilename":"mochawesome","saveHtml":true,"saveJson":true,"consoleReporter":"spec","useInlineDiffs":false,"code":true},"version":"7.1.3"},"marge":{"version":"6.2.0"}}}'
    data-config='{"reportFilename":"mochawesome","reportDir":"mochawesome-report","reportTitle":"consent-manager","reportPageTitle":"Mochawesome
    Report","inline":false,"inlineAssets":false,"cdn":false,"charts":false,"enableCharts":false,"code":true,"enableCode":true,"autoOpen":false,"overwrite":true,"timestamp":false,"ts":false,"showPassed":true,"showFailed":true,"showPending":true,"showSkipped":false,"showHooks":"failed","saveJson":true,"saveHtml":true,"dev":false,"assetsDir":"mochawesome-report\\assets","jsonFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\mochawesome-report\\mochawesome.json","htmlFile":"C:\\Users\\ASF\\Desktop\\Visions\\Visions\\PTx\\consent-manager\\mochawesome-report\\mochawesome.html"}'
    >
    <div id="report"></div>
    <script src="assets\app.js"></script>
  </body>
</html>
